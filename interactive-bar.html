<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Exercise Portfolio</title>
    <link href="css/style.css" rel="stylesheet" />
  </head>

  <body>

    <header>
      <!-- ADD YOUR NAME -->
      <h1>Yutong Han: Exercise Portfolio</h1>
    </header>

    <div id="content">

      <nav>
        <ul>
          <li><a href="index.html">Return to Main Page</a></li>
        </ul>
      </nav>

      <main>

        <h2>MLB Spring Training</h2>

        <p>During spring, teams are divided into two leagues: Grapefruit and Cactus. Click the button to see groups' win percentage. </p>

        <!-- ADD YOUR VISUALIZATION HERE -->

      </main>

      <div id="option">
        <input name="updateButton"
           type="button"
           value="Change"
           onclick="updateData()" />
      </div>
    </div>

    <script src="js/d3.min.js"></script>
    <script src="js/lodash.min.js"></script>
    <script src="js/pi.js"></script>
    <script>
      // add your script here
      // OR
      // add a link to a stand-alone script in the js folder
      var svg = d3.select("body")
                  .append("svg");
      var margin = {
        top: 20,
        right: 20,
        left: 20,
        bottom: 20
      };
      var w = window.innerWidth;
      var h = window.innerHeight;

      var height = 100;

      svg.attr("width", w - margin.right)
         .attr("height", h);

      d3.csv("data/spring-training.csv").then(function(data) {
        data.forEach(function(d) {
          d.wins = +d.wins;
          d.pct = +d.pct;
        })
        var league = _.groupBy(data, "league");
          console.log(league);
        var grapefruit = _.groupBy(league["G"], "div");
          console.log(grapefruit);
        var cactus = _.groupBy(league["C"], "div");
          console.log(cactus);

            svg.selectAll("rect")
             .data(grapefruit)
             .enter()
             .append("rect")
             .attr("class", "bar")
             .attr("x", function(d, i) {
               return i * (w / data.length);
             })
             .attr("y", function(d) {
               return 100*(1 - d.pct*1);
             })
             .attr("width", w / data.length - margin.left)
             .attr("height", function(d) {
               return d.pct*100;
             })
             .attr("fill", "teal");

             

        // var timeParser = d3.timeParse("%Y-%m-%d");
        // data.forEach(function(d){
        //
        //   d.date = timeParser(d.team);
        //   // var sortedD = _.orderBy(d.team, 'desc');
        //   // console.log(sortedD);
        //   var league = _.groupBy(data, 'league');
        //   // console.log(league);
        //   var Grapefruit = _.groupBy(league["G"], 'div');
        //   console.log(Grapefruit);
        //   var Cactus = _.groupBy(league["C"], 'div');
        //   console.log(Cactus);
        // })

        // var xScale = d3.scale
        //                .ordinal()
        //                .rangeBands([0, innerWidth], barPadding);
        //                .domain(data.map(function (d){ return d.team; });)
        //                .range([0, (w - margin.left - margin.right)]);
        //
        // var yScale = d3.scaleLinear()
        //                .domain(d3.extent(data,function(d) {
        //                  return d.pct}))
        //                .range([(h - margin.top - margin.bottom), 0]);



        // x.domain(data.map(function(d) {
        //   return d.team;
        // }));
        // y.domain([0, d3.max(data, function(d) {
        //   return d.pct;
        // })]);
        //
        // g.append("g")
        //  .attr("transform", "translate(0, " + height + ")")
        //  .call(d3.axisBottom(x))
        //
        // g.append("g")
        //  .call(d3.axisLeft(y))
        //  .append("text")
        //  .text("hello")
        //
        // g.selectAll(".bar")
        //  .data(data)
        //  .enter()
        //  .append("rect")
        //  .attr("class", "bar")
        //  .attr("x", function(d) {
        //    return x(d.team);
        //  })
        //  .attr("y", function(d) {
        //    return y(d.pct);
        //  })
        //  .attr("width", x.bandwidth())
        //  .attr("height", function(d) {
        //    return height - y(d.pct);
        //  });

        // var xAxis = d3.axisBottom()
        //               .scale(xScale)
        //               .ticks(10);
        //
        // var yAxis = d3.axisLeft()
        //               .scale(yScale)
        //               .ticks(10);

      // svg.append("g")
      //    .attr("transform", "translate(" + margin.left +", " + (h - margin.bottom) +")")
      //    .attr("class", "xaxis")
      //    .call(xAxis);
      //
      // svg.append("g")
      //   .attr("transform", "translate(" + margin.left +", "+ margin.top +")")
      //   .attr("class", "yaxis")
      //   .call(yAxis);

       function updateData() {

    // Get the data again
    // d3.csv("data/spring-training.csv", function(d) {



    // });
}
});

        // g.selectAll('rect').data(data)
        // .enter().append('rect')
        //   .attr('y', d => yScale(yValue(d)))
        //   .attr('width', d => xScale(xValue(d)))
        //   .attr('height', yScale.bandwidth());

















      // });






















    </script>
  </body>
</html>
